# 股票筛选系统 v4.7.0 - 使用总结

## 🎯 核心特点

### ✅ 简单
- 双击启动，无需复杂配置
- 界面清晰，操作直观

### ✅ 快速
- **秒级响应**：前端读取缓存，<1秒加载
- **自动更新**：后台每5分钟刷新数据

### ✅ 实用
- 真实数据源（AKShare + 腾讯API）
- 波段交易策略（主板+创业板，融资融券标的）
- 严格风控（排除ST、科创板，市值≤160亿）

## 📦 系统架构

```
┌─────────────────────────────────────────┐
│  后台定时任务 (scheduler.py)              │
│  - 每5分钟自动筛选                        │
│  - 保存结果到 screening_result.json      │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  后端API (main.py:8000)                  │
│  - 读取JSON文件                          │
│  - 秒级返回结果                          │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  前端界面 (localhost:5174)               │
│  - 显示筛选结果                          │
│  - 查看股票详情                          │
└─────────────────────────────────────────┘
```

## 🚀 快速启动

### 方式一：使用启动脚本（推荐）

1. **启动后台任务**
   ```
   双击：启动筛选任务.bat
   ```
   - 保持窗口运行
   - 每5分钟自动更新

2. **启动Web服务**
   ```
   双击：启动系统.bat
   ```
   - 后端：http://localhost:8000
   - 前端：http://localhost:5174

3. **打开浏览器**
   ```
   访问：http://localhost:5174
   ```

### 方式二：手动启动

```bash
# 终端1：后台筛选任务
cd backend
python scheduler.py

# 终端2：后端API
cd backend
python main.py

# 终端3：前端界面
cd frontend
npm run dev
```

## 📊 筛选策略

### 波段交易模式
- **涨幅范围**：-2% ~ 5%（不追涨）
- **量比范围**：1.5 ~ 3.0
- **市值上限**：≤160亿
- **板块限制**：主板 + 创业板
- **融资融券**：必须支持
- **风控**：排除ST、科创板、亏损股

### 筛选流程
1. 获取全市场数据（4909只）
2. 快速过滤（→ 约162只）
3. 详细分析（→ 约50只）
4. 保存前20只到文件

## 💡 使用技巧

### 1. 查看数据新鲜度
- API返回包含 `cache_age_minutes`
- 显示数据更新时间

### 2. 理解缓存机制
- 缓存有效期：10分钟
- 超过10分钟会提示启动后台任务
- 后台任务每5分钟自动更新

### 3. 性能优化
- 前端响应：<1秒
- 后台筛选：约2分钟
- 用户无需等待，直接查看缓存结果

## 📈 性能对比

| 指标 | v4.6.0（实时） | v4.7.0（缓存） |
|------|---------------|---------------|
| 响应时间 | 2-3分钟 | <1秒 |
| 数据新鲜度 | 实时 | 5分钟内 |
| 用户体验 | ❌ 等待太久 | ✅ 秒级响应 |
| 系统负载 | 高 | 低 |

## 🔧 故障排查

### 问题1：前端显示"请先启动后台筛选任务"
**解决**：运行 `启动筛选任务.bat`

### 问题2：后端端口8000被占用
**解决**：
```bash
# 杀掉占用端口的进程
Get-Process -Name python | Where-Object {$_.Path -like "*tickets-main*"} | Stop-Process -Force
```

### 问题3：前端端口5173被占用
**解决**：Vite会自动使用5174端口

### 问题4：数据太旧
**解决**：等待后台任务自动更新（每5分钟）

## 📝 版本历史

- **v4.7.0** - 简化实用版（后台定时任务 + 秒级响应）
- **v4.6.0** - 性能优化版（两阶段过滤）
- **v4.5.0** - 专业增强版（K线图表、买卖点）
- **v4.4.0** - 用户体验优化
- **v4.3.0** - 基础功能完善

## 🎓 总结

这个版本的核心理念是：**简单实用**

- ✅ 不追求实时性，5分钟延迟完全可接受
- ✅ 追求快速响应，秒级加载提升体验
- ✅ 后台自动化，用户无需手动刷新
- ✅ 架构简单，易于维护和扩展

适合个人投资者日常使用，快速筛选波段交易机会。
