# v4.14.0 筛选多样性优化 - 测试指南

## 🎯 测试目标
验证不同策略（激进型、保守型、平衡型）返回的股票有明显差异。

## 📋 测试前准备

### 1. 启动后端
```bash
cd backend
python main.py
```

### 2. 启动前端
```bash
cd frontend
npm run dev
```

### 3. 打开浏览器
访问：http://localhost:5173/

## 🧪 测试步骤

### 测试1：激进型策略
1. 点击"激进型"快捷筛选按钮
2. 观察返回的股票特征：
   - ✅ 涨幅应该在 3-7% 范围
   - ✅ 量比应该在 2-4 范围
   - ✅ 市值应该偏小（30-100亿）
   - ✅ 推荐理由应包含"强势上涨"、"量比爆发"、"小市值"等关键词

### 测试2：保守型策略
1. 点击"保守型"快捷筛选按钮
2. 观察返回的股票特征：
   - ✅ 涨幅应该在 -2-1% 范围（回调或小涨）
   - ✅ 量比应该在 1.5-2.5 范围
   - ✅ 市值应该偏大（80-160亿）
   - ✅ 推荐理由应包含"回调"、"温和"、"大市值"等关键词

### 测试3：平衡型策略
1. 点击"平衡型"快捷筛选按钮
2. 观察返回的股票特征：
   - ✅ 涨幅应该在 0-4% 范围
   - ✅ 量比应该在 1.8-3 范围
   - ✅ 市值应该适中（40-120亿）
   - ✅ 推荐理由应该综合平衡

### 测试4：对比验证
1. 记录三种策略返回的股票代码
2. 验证：
   - ✅ 三种策略返回的股票应该有明显不同
   - ✅ 至少有 50% 以上的股票不重复
   - ✅ 推荐理由明显不同

## 📊 预期结果示例

### 激进型可能返回：
```
股票A: 涨幅 +5.2%, 量比 3.1, 市值 45亿
推荐理由: 🚀🚀 强势上涨(5.2%)，激进首选 | 📊📊📊 量比爆发(3.1)，激进首选 | 💎💎💎 小市值(45亿)，激进首选
```

### 保守型可能返回：
```
股票B: 涨幅 -1.2%, 量比 1.8, 市值 135亿
推荐理由: 📉📉 深度回调(-1.2%)，保守首选 | 📊📊 量比温和(1.8)，保守首选 | 💎💎💎 大市值(135亿)，保守首选
```

### 平衡型可能返回：
```
股票C: 涨幅 +2.1%, 量比 2.3, 市值 68亿
推荐理由: 📈 温和上涨(2.1%)，趋势良好 | 📊📊 量比完美(2.3) | 💎💎 市值优质(68亿)，成长空间大
```

## 🔍 调试方法

### 查看后端日志
后端会打印策略类型：
```
🎯 波段交易筛选启动
📊 筛选条件:
   • 策略类型: aggressive  ← 确认策略类型正确
   • 涨幅范围: 3.0% ~ 7.0%
   • 量比范围: 2.0 ~ 4.0
```

### 查看浏览器控制台
前端会发送策略类型参数：
```javascript
GET /api/band-trading?strategy_type=aggressive&change_min=3&change_max=7...
```

## ❌ 常见问题

### 问题1：三种策略返回相同股票
**原因**：可能是缓存问题  
**解决**：
1. 清除浏览器缓存
2. 重启后端服务
3. 确认后端日志显示不同的策略类型

### 问题2：后端报错
**原因**：可能是 Python 依赖问题  
**解决**：
```bash
pip install -r backend/requirements.txt
```

### 问题3：前端无法连接后端
**原因**：后端未启动或端口被占用  
**解决**：
1. 确认后端运行在 http://localhost:8000
2. 检查防火墙设置

## ✅ 测试通过标准

- [ ] 激进型返回的股票涨幅明显高于保守型
- [ ] 保守型返回的股票市值明显大于激进型
- [ ] 三种策略的推荐理由有明显差异
- [ ] 后端日志正确显示策略类型
- [ ] 无 TypeScript 错误
- [ ] 无后端 Python 错误

## 📝 测试记录模板

```
测试时间：____________________
测试人员：____________________

激进型返回股票：
1. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)
2. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)
3. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)

保守型返回股票：
1. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)
2. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)
3. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)

平衡型返回股票：
1. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)
2. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)
3. ____________ (涨幅: ___%, 量比: ___, 市值: ___亿)

重复股票数量：_____ / 9
差异化程度：□ 优秀  □ 良好  □ 一般  □ 较差

测试结论：□ 通过  □ 不通过
备注：_________________________________
```

---

**提示**：如果测试过程中遇到问题，请查看：
- 后端日志：backend/main.py 的控制台输出
- 前端控制台：浏览器 F12 开发者工具
- 优化文档：v4.14.0_筛选多样性优化.md
