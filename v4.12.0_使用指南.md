# v4.12.0 智能提醒系统 - 使用指南

## 🚀 快速开始

### 1. 启动系统

```bash
# 启动后端服务
cd backend
python main.py

# 启动前端服务（新终端）
cd frontend
npm run dev
```

访问：http://localhost:5174

---

## 📱 功能介绍

### 提醒中心

点击顶部导航栏的 **🔔 提醒中心** 按钮，打开提醒管理界面。

#### 四大功能模块

1. **💰 价格提醒** - 股价达到目标价时提醒
2. **🎯 止损止盈** - 自动监控持仓盈亏
3. **📊 异动提醒** - 涨跌幅或成交量异常时提醒
4. **📜 提醒历史** - 查看所有触发的提醒记录

---

## 💡 使用场景

### 场景 1：设置价格提醒

**适用情况**：想在股价达到某个价位时买入或卖出

**操作步骤**：
1. 点击 **🔔 提醒中心**
2. 点击 **+ 添加提醒**
3. 选择"价格提醒"
4. 输入股票信息：
   - 股票代码：000001
   - 股票名称：平安银行
   - 当前价格：12.50
   - 目标价格：13.00
   - 方向：上涨到
5. 选择有效期：7天
6. 勾选通知方式：浏览器通知 + 音效
7. 点击"创建提醒"

**效果**：
- 当平安银行股价上涨到 13.00 元时
- 浏览器会弹出通知
- 播放提醒音效
- 提醒历史中记录这次提醒

---

### 场景 2：设置止损提醒

**适用情况**：持有股票，想在跌破止损位时及时卖出

**操作步骤**：
1. 点击 **🔔 提醒中心**
2. 切换到"止损止盈"标签页
3. 点击 **+ 添加提醒**
4. 选择"价格提醒"
5. 输入股票信息：
   - 股票代码：600519
   - 股票名称：贵州茅台
   - 当前价格：1800
   - 目标价格：1700（止损位）
   - 方向：下跌到
6. 选择有效期：30天
7. 勾选通知方式：浏览器通知 + 音效 + 系统消息
8. 点击"创建提醒"

**效果**：
- 当贵州茅台跌破 1700 元时
- 立即收到多种方式的提醒
- 可以及时止损，避免更大损失

---

### 场景 3：监控异动股票

**适用情况**：关注某只股票，想在出现异动时第一时间知道

**操作步骤**：
1. 点击 **🔔 提醒中心**
2. 切换到"异动提醒"标签页
3. 点击 **+ 添加提醒**
4. 选择"异动提醒"
5. 输入股票信息：
   - 股票代码：300750
   - 股票名称：宁德时代
   - 涨跌幅阈值：5%
   - 量比阈值：3
6. 选择有效期：15天
7. 勾选通知方式：浏览器通知 + 音效
8. 点击"创建提醒"

**效果**：
- 当宁德时代涨跌幅超过 5% 时，提醒
- 或者成交量比超过 3 倍时，提醒
- 帮助你抓住异动机会

---

## ⚙️ 高级设置

### 通知设置

在提醒中心可以配置：

1. **总开关** - 一键开启/关闭所有提醒
2. **提醒类型开关** - 单独控制价格/持仓/异动提醒
3. **交易时段限制** - 仅在交易时间提醒（避免打扰）
4. **提醒间隔** - 设置冷却期，避免重复提醒
5. **通知方式** - 选择浏览器通知、音效、系统消息

### 智能特性

#### 1. 交易时段判断
- 自动识别交易时间（周一至周五 9:30-11:30, 13:00-15:00）
- 非交易时段不会触发提醒（可配置）
- 避免在休息时间打扰

#### 2. 冷却期机制
- 同一条规则 24 小时内只提醒一次
- 避免频繁重复提醒
- 可在设置中调整冷却期时长

#### 3. 自动清理
- 过期的提醒规则自动清除
- 历史记录保留最近 100 条
- 保持系统整洁高效

---

## 🎯 最佳实践

### 1. 合理设置提醒数量
- 建议每只股票设置 1-2 条提醒
- 总提醒数量控制在 10 条以内
- 避免信息过载

### 2. 选择合适的有效期
- 短线交易：7-15 天
- 中线持有：30-60 天
- 长线投资：90 天

### 3. 组合使用通知方式
- 重要提醒：浏览器通知 + 音效 + 系统消息
- 一般提醒：浏览器通知 + 音效
- 参考提醒：仅系统消息

### 4. 定期检查提醒历史
- 每周查看一次提醒历史
- 分析哪些提醒最有用
- 优化提醒策略

---

## 🔔 通知权限设置

### 首次使用

1. 打开系统后，浏览器会弹出通知权限请求
2. 点击"允许"授予权限
3. 如果误点"拒绝"，可以在浏览器设置中重新开启

### Chrome 浏览器
1. 点击地址栏左侧的锁图标
2. 找到"通知"选项
3. 选择"允许"

### Edge 浏览器
1. 点击地址栏右侧的 ⋯ 图标
2. 选择"网站权限"
3. 找到"通知"并允许

### Firefox 浏览器
1. 点击地址栏左侧的 🛡️ 图标
2. 找到"通知"权限
3. 选择"允许"

---

## 📊 数据管理

### 查看存储数据

1. 打开浏览器开发者工具（F12）
2. 切换到 Application 标签
3. 左侧选择 Local Storage
4. 查看以下键：
   - `alert_rules` - 提醒规则
   - `alert_history` - 提醒历史
   - `notification_settings` - 通知设置

### 清除数据

如果需要重置系统：
1. 在提醒中心删除所有规则
2. 清空提醒历史
3. 或者在浏览器中清除 Local Storage

---

## 🐛 常见问题

### Q1: 为什么没有收到通知？

**可能原因**：
1. 浏览器通知权限未授予
2. 提醒规则被暂停
3. 不在交易时段（如果开启了交易时段限制）
4. 在冷却期内（24小时内已提醒过）

**解决方法**：
1. 检查浏览器通知权限
2. 确认规则状态为"活跃"
3. 检查通知设置
4. 查看控制台日志

### Q2: 音效无法播放？

**可能原因**：
1. 浏览器限制自动播放音频
2. 音效开关未开启

**解决方法**：
1. 与页面交互后（点击任意按钮）音效会正常播放
2. 在通知设置中确认音效开关已开启

### Q3: 提醒规则丢失？

**可能原因**：
1. 清除了浏览器数据
2. 使用了隐私模式

**解决方法**：
1. 不要清除浏览器的 Local Storage
2. 避免使用隐私模式
3. 定期导出重要规则（未来功能）

### Q4: 如何暂时关闭所有提醒？

**解决方法**：
1. 打开提醒中心
2. 点击设置按钮
3. 关闭"总开关"
4. 所有提醒暂停，但规则保留

---

## 💡 使用技巧

### 技巧 1：快速添加提醒
- 在股票卡片上右键（未来功能）
- 直接选择"添加提醒"
- 自动填充股票信息

### 技巧 2：批量管理
- 使用标签页快速切换不同类型的提醒
- 一键暂停/启用同类型的所有提醒

### 技巧 3：提醒模板
- 保存常用的提醒配置为模板
- 快速创建相似的提醒规则

### 技巧 4：提醒分组
- 按股票分组查看提醒
- 按类型分组管理规则

---

## 🎉 总结

智能提醒系统帮助你：
- ✅ 不错过任何交易机会
- ✅ 及时止损，控制风险
- ✅ 监控异动，抓住热点
- ✅ 解放双手，自动提醒

**开始使用，让交易更轻松！** 🚀

---

## 📞 反馈与支持

如有问题或建议，欢迎反馈：
- 在 GitHub 提 Issue
- 发送邮件到 support@example.com
- 加入用户交流群

---

**版本**: v4.12.0  
**更新时间**: 2026-02-07  
**作者**: AI Assistant


---

## 📊 持仓追踪功能（Phase 2 新增）

### 持仓管理

点击顶部导航栏的 **📊 我的持仓** 按钮，打开持仓追踪界面。

#### 核心功能

1. **持仓列表** - 查看所有持仓，实时显示盈亏
2. **统计面板** - 总市值、总盈亏、持仓数量、风险等级
3. **风险评估** - 智能分析持仓风险，提供优化建议
4. **自动提醒** - 添加持仓时自动创建止损止盈提醒

---

### 场景 4：添加持仓记录

**适用情况**：买入股票后，想追踪盈亏和风险

**操作步骤**：
1. 点击 **📊 我的持仓**
2. 点击 **+ 添加持仓**
3. 填写股票信息：
   - 股票代码：000001
   - 股票名称：平安银行
   - 当前价格：12.50（可选）
4. 填写买入信息：
   - 买入价格：12.00
   - 数量：1000股
   - 买入日期：2026-02-01
5. 止损止盈设置：
   - 勾选"自动计算止损止盈"
   - 止损价格：11.40（自动计算为买入价的95%）
   - 止盈价格：13.80（自动计算为买入价的115%）
6. 点击"添加持仓"

**效果**：
- 持仓列表中显示新持仓
- 实时显示当前价格和盈亏
- 自动创建止损提醒（11.40元）
- 自动创建止盈提醒（13.80元）
- 每30秒自动更新价格

**盈亏计算**：
```
成本 = 12.00 × 1000 = 12,000元
当前市值 = 12.50 × 1000 = 12,500元
盈亏金额 = 12,500 - 12,000 = +500元
盈亏比例 = (500 / 12,000) × 100% = +4.17%
```

---

### 场景 5：查看持仓统计

**适用情况**：想了解整体持仓情况和风险

**操作步骤**：
1. 点击 **📊 我的持仓**
2. 查看顶部统计面板

**统计指标**：

1. **总市值**（紫色卡片）
   - 显示所有持仓的当前总市值
   - 例如：¥125,000.00

2. **总盈亏**（绿色/红色卡片）
   - 显示总盈亏金额和比例
   - 盈利显示绿色，亏损显示红色
   - 例如：+¥5,000.00 (+4.17%)

3. **持仓数量**（粉色卡片）
   - 显示持仓股票数量
   - 显示平均持仓天数
   - 例如：5只，平均持仓 15 天

4. **风险等级**（动态颜色卡片）
   - 低风险：绿色
   - 中等风险：黄色
   - 高风险：红色
   - 显示集中度指标
   - 例如：低风险，集中度 25%

---

### 场景 6：风险评估和优化

**适用情况**：想了解持仓风险并获得优化建议

**操作步骤**：
1. 点击 **📊 我的持仓**
2. 查看"优化建议"面板

**风险评估维度**：

1. **集中度**
   - 最大持仓占比
   - 建议：< 30%（低风险），< 50%（中风险）

2. **板块分散度**
   - 不同板块数量 / 持仓数量
   - 建议：> 70%（低风险），> 50%（中风险）

3. **行业分散度**
   - 不同行业数量 / 持仓数量
   - 建议：> 70%（低风险），> 50%（中风险）

**优化建议示例**：
- ✅ "持仓风险分散良好，继续保持"
- ⚠️ "单只股票占比过高，建议分散投资"
- ⚠️ "板块过于集中，建议增加不同板块的股票"
- ⚠️ "行业过于集中，建议增加不同行业的股票"
- ⚠️ "持仓数量较少，建议增加到3-5只"
- ⚠️ "持仓数量较多，建议精简到5-10只"

---

### 场景 7：删除持仓

**适用情况**：卖出股票后，想从持仓列表中移除

**操作步骤**：
1. 点击 **📊 我的持仓**
2. 找到要删除的持仓
3. 点击"删除"按钮
4. 确认删除

**效果**：
- 持仓从列表中移除
- 统计数据自动更新
- 相关的止损止盈提醒仍然保留（需手动删除）

---

## 🔔 提醒系统与持仓追踪的配合

### 自动创建提醒

当你添加持仓并设置止损止盈时，系统会自动创建两个提醒：

1. **止损提醒**
   - 类型：stop_loss
   - 目标价：止损价格
   - 有效期：90天
   - 通知方式：浏览器通知 + 音效

2. **止盈提醒**
   - 类型：take_profit
   - 目标价：止盈价格
   - 有效期：90天
   - 通知方式：浏览器通知 + 音效

### 查看自动创建的提醒

1. 点击 **🔔 提醒中心**
2. 切换到"止损止盈"标签页
3. 可以看到自动创建的提醒规则

### 修改或删除提醒

- 在提醒中心可以单独管理这些提醒
- 删除持仓不会自动删除提醒
- 建议：卖出股票后，手动删除相关提醒

---

## 💡 最佳实践

### 持仓管理建议

1. **及时记录**
   - 买入股票后立即添加到持仓
   - 确保数据准确（价格、数量、日期）

2. **设置止损止盈**
   - 建议开启"自动计算"
   - 止损：-5%（保守）到 -10%（激进）
   - 止盈：+15%（保守）到 +30%（激进）

3. **定期检查**
   - 每天查看持仓盈亏
   - 关注风险评估建议
   - 及时调整持仓结构

4. **分散投资**
   - 持仓数量：3-5只（小资金）到 5-10只（大资金）
   - 单只股票占比：< 30%
   - 板块分散：至少3个不同板块
   - 行业分散：至少3个不同行业

5. **纪律执行**
   - 严格执行止损
   - 不要贪婪，及时止盈
   - 避免频繁交易

### 提醒设置建议

1. **价格提醒**
   - 关键支撑位/压力位
   - 前期高点/低点
   - 整数关口（如10元、20元）

2. **止损止盈**
   - 买入后立即设置
   - 根据市场情况动态调整
   - 不要设置过于激进的止损

3. **异动提醒**
   - 关注的潜力股
   - 重要板块龙头
   - 涨跌幅阈值：5-7%
   - 量比阈值：3-5倍

4. **通知方式**
   - 重要提醒：浏览器通知 + 音效 + 系统消息
   - 一般提醒：浏览器通知 + 系统消息
   - 参考提醒：仅系统消息

---

## 🎯 实战案例

### 案例：波段交易完整流程

**背景**：
- 股票：平安银行（000001）
- 策略：波段交易，目标收益 15%

**第1步：筛选股票**
1. 使用系统筛选功能
2. 选择"波段交易"模式
3. 发现平安银行符合条件
4. 当前价格：12.00元

**第2步：添加持仓**
1. 点击 **📊 我的持仓** → **+ 添加持仓**
2. 填写信息：
   - 股票代码：000001
   - 股票名称：平安银行
   - 买入价格：12.00
   - 数量：1000股
   - 买入日期：2026-02-01
3. 自动计算止损止盈：
   - 止损：11.40元（-5%）
   - 止盈：13.80元（+15%）
4. 点击"添加持仓"

**第3步：系统自动工作**
- ✅ 持仓记录已保存
- ✅ 自动创建止损提醒（11.40元）
- ✅ 自动创建止盈提醒（13.80元）
- ✅ 每30秒更新价格
- ✅ 实时显示盈亏

**第4步：持有期间**
- 每天查看持仓盈亏
- 关注风险评估
- 等待止盈或止损触发

**第5步：触发止盈**
- 股价上涨到 13.80元
- 收到浏览器通知 + 音效
- 提醒历史记录触发时间
- 及时卖出，锁定利润

**第6步：清理记录**
1. 点击 **📊 我的持仓**
2. 找到平安银行持仓
3. 点击"删除"
4. 点击 **🔔 提醒中心**
5. 删除相关提醒规则

**收益**：
```
买入成本：12.00 × 1000 = 12,000元
卖出金额：13.80 × 1000 = 13,800元
盈利：13,800 - 12,000 = 1,800元
收益率：(1,800 / 12,000) × 100% = 15%
```

---

## ❓ 常见问题

### Q1：价格为什么不更新？
**A**：
- 检查是否在交易时段（9:30-15:00）
- 系统每30秒更新一次
- 当前版本使用模拟数据，实际部署需连接真实API

### Q2：止损止盈提醒没有触发？
**A**：
- 检查提醒规则是否激活
- 检查是否在交易时段
- 检查浏览器通知权限
- 查看提醒历史，确认是否已触发

### Q3：如何修改持仓信息？
**A**：
- 当前版本暂不支持编辑
- 可以删除后重新添加
- 或等待后续版本更新

### Q4：持仓数据会丢失吗？
**A**：
- 数据保存在浏览器 localStorage
- 清除浏览器数据会丢失
- 建议定期导出备份（后续版本支持）

### Q5：风险评估不准确？
**A**：
- 需要添加板块和行业信息
- 当前版本可能缺少这些数据
- 后续版本会自动获取

### Q6：可以同时管理多个账户吗？
**A**：
- 当前版本不支持
- 所有持仓在同一个列表
- 后续版本考虑添加账户分组功能

---

## 🔧 技术说明

### 数据存储

所有数据保存在浏览器 localStorage：

- **提醒规则**: `ALERT_RULES`
- **提醒历史**: `ALERT_HISTORY`
- **通知设置**: `NOTIFICATION_SETTINGS`
- **持仓数据**: `PORTFOLIO_POSITIONS`
- **自选股**: `WATCHLIST_STOCKS`

### 更新频率

- **提醒检查**: 每60秒
- **价格更新**: 每30秒
- **持仓刷新**: 每30秒

### 浏览器兼容性

- Chrome 90+
- Edge 90+
- Firefox 88+
- Safari 14+

### 通知权限

首次使用时会请求浏览器通知权限：
- 点击"允许"以接收桌面通知
- 拒绝后可在浏览器设置中重新开启

---

## 📞 支持与反馈

如有问题或建议，请：
1. 查看本使用指南
2. 查看测试指南
3. 查看完成报告
4. 联系开发团队

---

**版本**: v4.12.0 (Phase 1 + Phase 2)  
**更新日期**: 2026-02-07  
**文档状态**: ✅ 最新
