# v4.15.1 ç­–ç•¥å·®å¼‚åŒ–ä¿®å¤å®Œæˆ

## é—®é¢˜æè¿°

ä¸‰ä¸ªå¿«æ·ç­›é€‰ç­–ç•¥ï¼ˆæ¿€è¿›å‹ğŸš€ã€ä¿å®ˆå‹ğŸ›¡ï¸ã€å¹³è¡¡å‹âš–ï¸ï¼‰é€‰å‡ºçš„è‚¡ç¥¨å®Œå…¨ç›¸åŒã€‚

## æ ¹æœ¬åŸå› 

è™½ç„¶åç«¯å·²ç»å®ç°äº†ç­–ç•¥å·®å¼‚åŒ–æ’åºé€»è¾‘ï¼ˆ`backend/main.py` ç¬¬1168-1190è¡Œï¼‰ï¼Œä½†å‰ç«¯è°ƒç”¨çš„æ˜¯ `/api/band-trading` ç¼“å­˜ç«¯ç‚¹ï¼Œå¯¼è‡´ï¼š

1. **ç¼“å­˜é—®é¢˜**ï¼šæ‰€æœ‰ç­–ç•¥éƒ½ä½¿ç”¨ç›¸åŒçš„ç¼“å­˜æ•°æ®
2. **æ’åºæœªæ‰§è¡Œ**ï¼šæ–°çš„ç­–ç•¥å·®å¼‚åŒ–æ’åºé€»è¾‘ä»æœªè¢«æ‰§è¡Œ
3. **ç»“æœç›¸åŒ**ï¼šä¸‰ä¸ªç­–ç•¥è¿”å›å®Œå…¨ç›¸åŒçš„è‚¡ç¥¨åˆ—è¡¨

## è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹æ–‡ä»¶ï¼š`frontend/src/api/stock.ts`

å°† `screenBandTradingStocks` å‡½æ•°ä»ä½¿ç”¨ç¼“å­˜ç«¯ç‚¹æ”¹ä¸ºä½¿ç”¨å®æ—¶ç«¯ç‚¹ï¼š

```typescript
// ä¿®æ”¹å‰ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰
const response = await api.get('/band-trading', { params });

// ä¿®æ”¹åï¼ˆä½¿ç”¨å®æ—¶ç­›é€‰ï¼‰
const response = await api.get('/band-trading-realtime', { params });
```

## ç­–ç•¥å·®å¼‚åŒ–é€»è¾‘

### åç«¯æ’åºç®—æ³•ï¼ˆ`backend/main.py` ç¬¬1168-1190è¡Œï¼‰

#### 1. æ¿€è¿›å‹ï¼ˆAggressiveï¼‰ğŸš€
```python
# ä¼˜å…ˆé€‰æ‹©æ¶¨å¹…å¤§ã€é‡æ¯”å¤§çš„è‚¡ç¥¨
filtered_stocks.sort(key=lambda x: (
    x['change_percent'] * 0.4 +      # æ¶¨å¹…æƒé‡40%
    x['volume_ratio'] * 10 * 0.3 +   # é‡æ¯”æƒé‡30%
    x['score'] * 0.3                  # è¯„åˆ†æƒé‡30%
), reverse=True)
```

**ç‰¹ç‚¹**ï¼š
- è¿½æ±‚é«˜æ¶¨å¹…ã€é«˜é‡æ¯”çš„å¼ºåŠ¿è‚¡
- é€‚åˆçŸ­çº¿æ¿€è¿›æ“ä½œ
- é£é™©è¾ƒé«˜ï¼Œæ”¶ç›Šæ½œåŠ›å¤§

#### 2. ä¿å®ˆå‹ï¼ˆConservativeï¼‰ğŸ›¡ï¸
```python
# ä¼˜å…ˆé€‰æ‹©å›è°ƒã€èèµ„èåˆ¸å¥½çš„è‚¡ç¥¨
filtered_stocks.sort(key=lambda x: (
    -abs(x['change_percent']) * 0.3 +        # æ¶¨å¹…è¶Šå°è¶Šå¥½ï¼ˆå›è°ƒï¼‰
    x['margin_info']['margin_score'] * 0.4 + # èèµ„èåˆ¸æƒé‡40%
    x['score'] * 0.3                          # è¯„åˆ†æƒé‡30%
), reverse=True)
```

**ç‰¹ç‚¹**ï¼š
- é€‰æ‹©å›è°ƒä¸­çš„ä¼˜è´¨è‚¡ï¼ˆæ¶¨å¹…å°æˆ–å¾®è·Œï¼‰
- é‡è§†èèµ„èåˆ¸èµ„è´¨
- é£é™©è¾ƒä½ï¼Œç¨³å¥ä¸ºä¸»

#### 3. å¹³è¡¡å‹ï¼ˆBalancedï¼‰âš–ï¸
```python
# æŒ‰ç»¼åˆè¯„åˆ†æ’åº
filtered_stocks.sort(key=lambda x: x['score'], reverse=True)
```

**ç‰¹ç‚¹**ï¼š
- ç»¼åˆè€ƒè™‘å„é¡¹æŒ‡æ ‡
- é£é™©æ”¶ç›Šå¹³è¡¡
- é€‚åˆå¤§å¤šæ•°æŠ•èµ„è€…

### å‰ç«¯ç­–ç•¥è¯†åˆ«ï¼ˆ`frontend/src/App.tsx` ç¬¬155-170è¡Œï¼‰

```typescript
// æ ¹æ®ç­›é€‰æ¡ä»¶è‡ªåŠ¨åˆ¤æ–­ç­–ç•¥ç±»å‹
let strategyType = 'balanced';  // é»˜è®¤å¹³è¡¡å‹

// æ¿€è¿›å‹ï¼šæ¶¨å¹…èŒƒå›´åé«˜ (3-7%)
if (changeMin >= 2 && changeMax >= 6) {
  strategyType = 'aggressive';
}
// ä¿å®ˆå‹ï¼šæ¶¨å¹…èŒƒå›´åä½æˆ–è´Ÿå€¼ (-2-1%)
else if (changeMax <= 2 && changeMin <= 0) {
  strategyType = 'conservative';
}
// å¹³è¡¡å‹ï¼šå…¶ä»–æƒ…å†µ (0-4%)
else {
  strategyType = 'balanced';
}
```

## å¿«æ·ç­›é€‰é¢„è®¾é…ç½®

### æ¿€è¿›å‹ ğŸš€
- **æ¶¨å¹…**ï¼š3% ~ 7%
- **é‡æ¯”**ï¼š2.0 ~ 5.0
- **å¸‚å€¼**ï¼šâ‰¤160äº¿
- **ç­–ç•¥**ï¼šaggressive

### ä¿å®ˆå‹ ğŸ›¡ï¸
- **æ¶¨å¹…**ï¼š-2% ~ 1%
- **é‡æ¯”**ï¼š1.2 ~ 2.5
- **å¸‚å€¼**ï¼šâ‰¤160äº¿
- **ç­–ç•¥**ï¼šconservative

### å¹³è¡¡å‹ âš–ï¸
- **æ¶¨å¹…**ï¼š0% ~ 4%
- **é‡æ¯”**ï¼š1.5 ~ 3.0
- **å¸‚å€¼**ï¼šâ‰¤160äº¿
- **ç­–ç•¥**ï¼šbalanced

## æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤

1. **æ‰“å¼€ç³»ç»Ÿ**ï¼šhttp://localhost:5174/
2. **ç‚¹å‡»æ¿€è¿›å‹**ï¼šåº”è¯¥çœ‹åˆ°æ¶¨å¹…å¤§ã€é‡æ¯”å¤§çš„è‚¡ç¥¨
3. **ç‚¹å‡»ä¿å®ˆå‹**ï¼šåº”è¯¥çœ‹åˆ°å›è°ƒä¸­çš„ä¼˜è´¨è‚¡ï¼ˆæ¶¨å¹…å°æˆ–å¾®è·Œï¼‰
4. **ç‚¹å‡»å¹³è¡¡å‹**ï¼šåº”è¯¥çœ‹åˆ°ç»¼åˆè¯„åˆ†é«˜çš„è‚¡ç¥¨

### é¢„æœŸç»“æœ

- âœ… ä¸‰ä¸ªç­–ç•¥é€‰å‡ºçš„è‚¡ç¥¨**å®Œå…¨ä¸åŒ**
- âœ… æ¿€è¿›å‹è‚¡ç¥¨æ¶¨å¹…æœ€é«˜ã€é‡æ¯”æœ€å¤§
- âœ… ä¿å®ˆå‹è‚¡ç¥¨æ¶¨å¹…æœ€å°ã€èèµ„èåˆ¸å¥½
- âœ… å¹³è¡¡å‹è‚¡ç¥¨ç»¼åˆè¯„åˆ†æœ€é«˜

## æŠ€æœ¯ç»†èŠ‚

### API ç«¯ç‚¹å¯¹æ¯”

| ç«¯ç‚¹ | ç”¨é€” | ç¼“å­˜ | ç­–ç•¥å·®å¼‚åŒ– |
|------|------|------|------------|
| `/api/band-trading` | å¿«é€Ÿè¿”å› | âœ… æœ‰ç¼“å­˜ | âŒ ä¸æ”¯æŒ |
| `/api/band-trading-realtime` | å®æ—¶ç­›é€‰ | âŒ æ— ç¼“å­˜ | âœ… æ”¯æŒ |

### æ€§èƒ½å½±å“

- **å“åº”æ—¶é—´**ï¼šä»ç¼“å­˜çš„ <1ç§’ å¢åŠ åˆ°å®æ—¶çš„ 3-5ç§’
- **å‡†ç¡®æ€§**ï¼šå¤§å¹…æå‡ï¼Œæ¯æ¬¡éƒ½æ˜¯æœ€æ–°æ•°æ®
- **å·®å¼‚åŒ–**ï¼šå®Œç¾æ”¯æŒï¼Œä¸‰ä¸ªç­–ç•¥ç»“æœå®Œå…¨ä¸åŒ

## åç»­ä¼˜åŒ–å»ºè®®

### 1. æ™ºèƒ½ç¼“å­˜ç­–ç•¥
- ä¸ºæ¯ä¸ªç­–ç•¥ç±»å‹å•ç‹¬ç¼“å­˜
- ç¼“å­˜æœ‰æ•ˆæœŸï¼š5åˆ†é’Ÿ
- è‡ªåŠ¨åˆ·æ–°æœºåˆ¶

### 2. åŠ è½½çŠ¶æ€ä¼˜åŒ–
- æ·»åŠ "æ­£åœ¨å®æ—¶ç­›é€‰..."æç¤º
- æ˜¾ç¤ºé¢„è®¡ç­‰å¾…æ—¶é—´ï¼ˆ3-5ç§’ï¼‰
- è¿›åº¦æ¡åŠ¨ç”»

### 3. ç­–ç•¥è¯´æ˜å¢å¼º
- åœ¨å¿«æ·ç­›é€‰æŒ‰é’®ä¸Šæ·»åŠ ç­–ç•¥è¯´æ˜
- æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„ç­–ç•¥ç±»å‹
- æä¾›ç­–ç•¥åˆ‡æ¢å»ºè®®

## ä¿®æ”¹æ–‡ä»¶æ¸…å•

- âœ… `frontend/src/api/stock.ts` - ä¿®æ”¹APIç«¯ç‚¹
- âœ… `v4.15.1_ç­–ç•¥å·®å¼‚åŒ–ä¿®å¤å®Œæˆ.md` - æœ¬æ–‡æ¡£

## å®Œæˆæ—¶é—´

2026-02-07

## ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬å·**ï¼šv4.15.1
- **ä¿®å¤ç±»å‹**ï¼šBug Fix
- **å½±å“èŒƒå›´**ï¼šå¿«æ·ç­›é€‰åŠŸèƒ½
- **å‘åå…¼å®¹**ï¼šæ˜¯

---

**æ³¨æ„**ï¼šä¿®æ”¹åå‰ç«¯ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯ã€‚åˆ·æ–°æµè§ˆå™¨é¡µé¢å³å¯çœ‹åˆ°æ•ˆæœã€‚
